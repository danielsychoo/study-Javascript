# GraphQL-yoga

## GraphQL로 해결할 수 있는 문제들
  1. Over-fetching: 요청에 대해 필요한 data 이상으로 data를 받아와 비효율적인 상황
  2. Under-fetching: 필요한 여러 data를 위해 여러번 요청해야 하는 비효율적인 상황

GraphQL은 두 가지의 특징에서 이러한 부분들을 해결할 수 있음.
  1. 요청을 하는 endpoint가 하나로 되어있음. 따라서 각각의 data를 위해 각각 요청할 필요가 없음.
  2. front에서 직접 query를 작성하여 필요한 정보만 받아올 수 있음.

---

## 환경설정
graphql-yoga의 경우 npm으로 install하면 실행이 안됨 (현재에 한정이고, babel 등 version의 문제로 보임)

### 1) install 진행
```bash
$ mkdir <project명>
$ npm init -y
$ yarn add graphql-yoga
$ npm i -g nodemon
npm i @babel/core @babel/cli @babel/node @babel/preset-env --save-dev
```
### 2) babel preset -> .babelrc
```javascript
{
  "presets": ["@babel/preset-env"]
}
```
### 3) scripts 작성 -> package.json
```javascript
"scripts": {
  "start": "nodemon --exec babel-node index.js",
  ...
}
```
### 4) index.js 작성

---

## Schema
`graphql` dir을 생성하여 해당 dir 내부에 `schema.graphql`, `resolvers.js`를 작성.

### 1) graphql/schema.graphql
  - query에 대한 type등을 지정
  - client단에서 어떤 query를 보내야 할지, 무엇이 필수(isRequired)인지 등 확인 가능.
```graphql
type Query {
  name: String!
}
```

### 2) graphql/resolvers.js
  - `schema.graphql`에서 define한 query에 대한 실제 return data들이 있음.
```javascript
const resolvers = {
  Query: {
    name: () => "daniel",
  },
};

export default resolvers;
```

Query: data를 받을 때 사용
Mutation: data를 보낼 때 사용
